
// pseudo code

compare ldap_trees() {
    for item1 in tree1.search(all objects) {
        item2 = tree2.search(dn=item1.dn)   // exception on not found
        compare_ldap_entries(item1, item2)
    }
    for item2 in tree2.search(all objects) {
        item1 = tree1.search(dn=item2.dn)   // exception on not found
        compare_ldap_entries(item2, item21)
    }
}

compare_ldap_entries(item1, item2) {
    for each attribute1 in item1.attributes() {
       compare_attribute_values(attribute1, item2[attribute1.name].values()  // exception if different
    for each attribute2 in item2.attributes() {
       compare_attribute_values(attribute2, item1[attribute1.name].values()  // exception if different
}


compare_attribute_values(attr1, attr2) {
    ...
}